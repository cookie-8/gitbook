# 技巧

1. 格式化时间

```js
export function formatDate(oldDate, fmt) {
	let date = new Date();
	if (typeof oldDate === 'string' || typeof oldDate === 'number') {
		date = new Date(+oldDate);
	} else {
		date = oldDate;
	}
	if (/(y+)/.test(fmt)) {
		fmt = fmt.replace(
			RegExp.$1,
			(date.getFullYear() + '').substr(4 - RegExp.$1.length)
		);
	}
	let o = {
		'M+': date.getMonth() + 1,
		'd+': date.getDate(),
		'h+': date.getHours(),
		'm+': date.getMinutes(),
		's+': date.getSeconds()
	};
	function padLeftZero(str) {
		return ('00' + str).substr(str.length);
	}
	for (let k in o) {
		if (new RegExp(`(${k})`).test(fmt)) {
			let str = o[k] + '';
			fmt = fmt.replace(
				RegExp.$1,
				RegExp.$1.length === 1 ? str : padLeftZero(str)
			);
		}
	}
	return fmt;
}
```

2. 快速获取 url 中的参数

```js
function getUrlParams(param) {
	var query = window.location.search.substring(1);
	var vars = query.split('&');
	for (var i = 0; i < vars.length; i++) {
		var pair = vars[i].split('=');
		if (pair[0] == param) {
			return pair[1];
		}
	}
	return false;
}
```

    不考虑ie :smile:

```js
var urlParams = new URLSearchParams('?post=1234&action=edit');
console.log(urlParams.get('action')); // "edit"
```

3. 移动端判断浏览器类型

```js
BrowserInfo = {
	isAndroid: Boolean(navigator.userAgent.match(/android/gi)),
	isIphone: Boolean(navigator.userAgent.match(/iphone|ipod/gi)),
	isIpad: Boolean(navigator.userAgent.match(/ipad/gi)),
	isWeixin: Boolean(navigator.userAgent.match(/MicroMessenger/gi)),
	isAli: Boolean(navigator.userAgent.match(/AlipayClient/gi)),
	isPhone: Boolean(
		/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)
	)
};
```

4. 防抖 节流

```js
function debounce(func, wait) {
	let timeout;
	return function() {
		let context = this;
		let args = arguments;

		if (timeout) clearTimeout(timeout);

		timeout = setTimeout(() => {
			func.apply(context, args);
		}, wait);
	};
}

function throttle(func, wait) {
	let previous = 0;
	return function() {
		let now = Date.now();
		let context = this;
		let args = arguments;
		if (now - previous > wait) {
			func.apply(context, args);
			previous = now;
		}
	};
}
```
