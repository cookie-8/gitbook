# 第 1 节：算法

1. 斐波那契变种
   fn(2) => [1,1,2,3,5,8,13]
   fn(3) => [1,1,1,3,5,9,14]
   fn(4) => [1,1,1,1,4,7,13,25]
   求 fn(n)中的第 index 个元素
   fn(key,index)

```js
function fn(key, index) {
  const map = {}
  function fib(n) {
    if (map[n]) return map[n]
    if (n < key) {
      map[n] = 1
      return 1
    }

    let sum = 0
    for (let i = 1; i <= key; i++) {
      sum += fib(n - i)
    }
    map[n] = sum
    return sum
  }
  return fib(index)
}
```

2. 单词反转

```js
/**
 *   输入：www.toutiao.com.cn 输出：cn.com.toutiao.www
 */
function reversWords(str) {
  let result = ""
  let words = ""
  let index = 0
  const length = str.length
  while (index < length) {
    while (index < length && str.charAt(index) === ".") {
      index++
    }
    while (index < length && str.charAt(index) !== ".") {
      words = `${words}${str.charAt(index)}`
      index++
    }

    result = `${words}${result ? "." : ""}${result}`
    words = ""
  }
  return result
}
//test
reversWords("www.toutiao.com.cn")
```

3. 折半查找

```js
// 折半
function halfFind(arr, target) {
  function find(s, e) {
    if (s >= e) return null
    const index = ((s + e) / 2) | 0
    if (arr[index] === target) return index
    else if (arr[index] > target) return find(s, index - 1)
    else return find(index + 1, e)
  }
  return find(0, arr.length - 1)
}
//test
halfFind([1, 2, 3, 4, 5, 6, 7, 8], 7)
```

4.  排列组合
    4.1 字符串全排列

```js
// 字符串全排列
function list(str) {
  const result = []
  if (str.length > 1) {
    for (let i = 0; i < str.length; i++) {
      const left = str[i]

      const right = str.slice(0, i) + str.slice(i + 1)
      const arr = list(right)
      for (let j = 0; j < arr.length; j++) {
        result.push(left + arr[j])
      }
    }
    return result
  } else if (str.length === 1) {
    result.push(str)
  }
  return result
}
// test
list("abcd")
```

4.2 数组排列组合 (商品 sku 组合)

```js
// [a,b]   [c,d]  [e,f]
function skuList(array) {
  const result = []
  let tarr = []

  function list(arr, index) {
    for (let i = 0; i < arr[index].length; i++) {
      const temp = arr[index][i]
      tarr[index] = temp
      if (index < arr.length - 1) {
        list(arr, index + 1)
      } else {
        result.push(tarr)
        tarr = [...tarr]
      }
    }
  }

  list(array, 0)
  return result
}
```

5. 实现 destructuringArray

```js
// destructuringArray( [1,[2,4],3], "[a,[b],c]" );
// result
// { a:1, b:2, c:3 }
function destructuringArray(arr, str) {
  // 转换字符串，提取变量
  const _str = str.replace(/\w/g, `"$&"`)
  const arrStr = JSON.parse(_str)
  const obj = {}
  function deepTraval(nums, strs) {
    if (Array.isArray(strs)) {
      for (let i = 0; i < strs.length; i++) {
        deepTraval(nums[i], strs[i])
      }
    } else {
      obj[strs] = nums
    }
  }
  deepTraval(arr,arrStr)
  return obj
}

//test
destructuringArray([1, [2, 4], 3], "[a,[b],c]")
```
